---
id: std-20260206-120000-v0bs
depthUsed: standard
timestamp: 2026-02-06T12:00:00Z
executed: false
originalPrompt: "create a v0 setup with tooling, local environment, seed generation, and step-by-step instructions for user to implement dependencies (eg: supabase keys in .env). The idea is for agents to detect when a project is v0 (first version) and do this initial project setup only once."
---

# Improved Prompt

## Objective

Create a v0 bootstrap system that detects first-run projects and performs one-time
initial setup: tooling configuration, local environment scaffolding, database seeding,
and a step-by-step dependency checklist for the user.

## Context

- Stack: Next.js App Router, Tailwind, shadcn/ui, Supabase, Stripe, Google OAuth
- SDD workflow with 20-agent swarm (agents in `claude/agents/`)
- Build versions live in `.ops/build/v{x}/`
- This system runs ONCE per project — when no prior version exists

## Requirements

### 1. V0 Detection
- Agent checks for the absence of `.ops/build/v0/` or a sentinel file
  (e.g., `.ops/.v0-initialized`) to determine first-run state
- If v0 already initialized, skip entirely with a message: "Project already bootstrapped"
- Detection should work from any Clavix command or agent entry point

### 2. Tooling Configuration
- Verify/install: Node.js (>=18), npm, ESLint, Prettier
- Initialize config files if missing: `.eslintrc`, `.prettierrc`, `tsconfig.json`
- Verify `.gitignore` covers `.env`, `.env.*`, `node_modules/`, `.next/`

### 3. Local Environment Scaffolding
- Create `.env.local.example` with ALL required env vars (empty values + comments):
  - `NEXT_PUBLIC_SUPABASE_URL` — "Your Supabase project URL"
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY` — "Your Supabase anon/public key"
  - `SUPABASE_SERVICE_ROLE_KEY` — "Your Supabase service role key (server-only)"
  - `STRIPE_SECRET_KEY` — "Your Stripe secret key"
  - `STRIPE_PUBLISHABLE_KEY` — "Your Stripe publishable key"
  - `STRIPE_WEBHOOK_SECRET` — "Your Stripe webhook signing secret"
  - `GOOGLE_CLIENT_ID` — "Your Google OAuth client ID"
  - `GOOGLE_CLIENT_SECRET` — "Your Google OAuth client secret"
  - `NEXTAUTH_SECRET` — "Random secret for NextAuth (run: openssl rand -base64 32)"
  - `NEXTAUTH_URL` — "http://localhost:3000"
- If `.env.local` doesn't exist, copy from `.env.local.example`

### 4. Database Seed Generation
- Create `supabase/seed.sql` with:
  - Default roles/permissions tables (if defined in system-design.yaml)
  - Sample user records (non-sensitive test data only)
  - Any lookup/reference data needed for the app to boot
- Create `scripts/seed.ts` that runs the seed via Supabase client
- Add `npm run db:seed` script to `package.json`

### 5. User Dependency Checklist
- Generate `.ops/build/v0/setup-checklist.md` with step-by-step instructions:
  1. Create Supabase project → get URL + keys
  2. Create Stripe account → get API keys + configure webhook
  3. Set up Google OAuth credentials in Google Cloud Console
  4. Copy `.env.local.example` → `.env.local` and fill in values
  5. Run `npm install`
  6. Run `npm run db:seed` (after Supabase is configured)
  7. Run `npm run dev` to verify
- Each step should include: what to do, where to go, what value to paste where

### 6. Post-Bootstrap
- Create sentinel file `.ops/.v0-initialized` with timestamp
- Create `.ops/build/v0/` directory structure
- Log summary of what was created/skipped

## Constraints
- NEVER generate actual secrets or API keys — only placeholders
- NEVER commit `.env.local` — only `.env.local.example`
- All seed data must be non-sensitive test data
- Idempotent: running twice should not duplicate or break anything
- Follow existing project conventions (kebab-case files, PascalCase components)

## Success Criteria
- A fresh clone of the repo can run this bootstrap and have a working local
  environment after the user completes the checklist
- Agents detect v0 state and trigger this automatically (once)
- No secrets are exposed in any committed file

## Quality Scores
- **Clarity**: 92%
- **Efficiency**: 85%
- **Structure**: 95%
- **Completeness**: 90%
- **Actionability**: 90%
- **Overall**: 90% (excellent)

## Original Prompt
```
create a v0 setup with tooling, local environment, seed generation, and step-by-step instructions for user to implement dependencies (eg: supabase keys in .env). The idea is for agents to detect when a project is v0 (first version) and do this initial project setup only once.
```
