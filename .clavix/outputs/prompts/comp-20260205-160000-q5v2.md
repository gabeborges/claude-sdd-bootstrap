---
id: comp-20260205-160000-q5v2
depthUsed: comprehensive
timestamp: 2026-02-05T16:00:00Z
executed: false
originalPrompt: "claude-code-specialist agent, based on your knowledge about claude, review claude/commands/orchestrate.md and see if there are improvements that can be made. It's important to keep consistency with Agents.md and CLAUDE.md and to follow SDD rules and guardrails."
---

# Improved Prompt

# Review orchestrate.md for Token Efficiency, Structural Quality, and SDD Compliance

## Objective
Review `claude/commands/orchestrate.md` through the lens of a Claude Code specialist — evaluate whether the skill is optimized for AI consumption, structurally sound as a Claude Code skill, and fully compliant with the SDD rules in AGENTS.md and CLAUDE.md. Propose concrete improvements.

## Authoritative Sources (in order)
1. **AGENTS.md** — agent roster, DAG, SDD artifact flow, prerequisite rules, folder structure
2. **CLAUDE.md** — project rules, SDD artifact flow, security guardrails, token/context rules
3. **claude/commands/orchestrate.md** — the file being reviewed

When orchestrate.md conflicts with AGENTS.md or CLAUDE.md, the latter wins.

## Review Dimensions

### Dimension 1: Token/Context Efficiency
This is a skill file — its description is always loaded but its body is loaded on-demand when invoked. Evaluate:
- Is the file as concise as it can be without losing operational clarity?
- Are there redundant instructions that Claude already follows from CLAUDE.md (which is auto-loaded)?
- Are there verbose explanations that could be tightened into tables or bullets?
- Is information structured for fast AI parsing (tables > prose, bullets > paragraphs)?
- Could any content be removed because it duplicates CLAUDE.md rules (e.g., security guardrails, SDD flow)?

### Dimension 2: SDD Compliance
Verify that every SDD rule in CLAUDE.md and AGENTS.md is respected:
- Pre-flight prerequisite table matches AGENTS.md exactly (all 3 rules, correct wording)
- Tier execution order matches AGENTS.md 6-tier DAG exactly
- Artifact paths match AGENTS.md folder structure (`.ops/build/system-design.yaml`, `.ops/build/v{x}/<feature>/specs.md`, etc.)
- File extensions are correct everywhere (`.yaml` for tasks, system-design, spec-change-requests; `.md` for specs)
- "Read before coding" artifacts from CLAUDE.md Section 0 are covered in the Read Artifacts step
- `implements:` traceability requirement from AGENTS.md Definition of Done is enforced
- Spec-change-request workflow matches AGENTS.md Section "Spec-Change Requests"

### Dimension 3: Structural Quality as a Skill
Evaluate against Claude Code skill best practices:
- Does the skill have proper structure for a Claude Code command? (it currently lacks YAML frontmatter — should it have one?)
- Is the pre-flight section in the optimal position? (before or after the title/description?)
- Are execution steps numbered clearly and sequentially?
- Is the "Important Rules" section necessary, or does it duplicate content already in CLAUDE.md/AGENTS.md?
- Are agent file paths correct? (`agents/` vs `.claude/agents/` — check AGENTS.md roster for actual paths)

### Dimension 4: Missing Guardrails
Check for guardrails present in CLAUDE.md/AGENTS.md that are missing from orchestrate.md:
- Does orchestrate.md enforce the "read before coding" mandate from CLAUDE.md Section 0?
- Does it enforce version safety (CLAUDE.md: "Do not mix build versions")?
- Does it enforce the security stop condition (CLAUDE.md: "If security conflicts with spec, create spec-change-requests.yaml")?
- Does it reference `.ops/build/decisions-log.md` correctly?
- Does it handle the case where `system-design.yaml` is missing but `specs.md` exists (should trigger architect before project-task-planner)?
- Does it enforce Definition of Done from AGENTS.md before marking tickets complete?

### Dimension 5: Agent Spawning Accuracy
Verify agent spawning instructions are correct:
- Does the "Always spawn" list in step 2 match what AGENTS.md requires?
- Is the keyword trigger table complete? (compare against AGENTS.md agent selection guide for coverage gaps)
- Is the sequential-within-tier instruction for Tier 2 clear enough? (spec-writer → architect → project-task-planner must be sequential, not parallel)

## Constraints
- Only propose changes to `claude/commands/orchestrate.md`
- Do NOT modify CLAUDE.md or AGENTS.md
- Do NOT fabricate new rules, agents, or workflow steps
- All proposed changes must be traceable to AGENTS.md or CLAUDE.md
- Preserve the skill's purpose: it's a command prompt for the workflow orchestrator, not a reference doc
- Keep the file concise — skills should be lean since they load into context

## Process
1. Read current CLAUDE.md (for reference)
2. Read current AGENTS.md (for reference)
3. Read current `claude/commands/orchestrate.md`
4. Evaluate against all 5 review dimensions
5. Propose specific, traceable improvements (cite the source rule for each)
6. Apply all improvements
7. Read back orchestrate.md to verify

## Output Format
For each proposed change, provide:
```
### Change N: [Short title]
**Source rule**: [Which AGENTS.md/CLAUDE.md rule this traces to]
**Current**: [What orchestrate.md says now]
**Proposed**: [What it should say]
**Rationale**: [Why this is an improvement]
```

After all changes are applied, provide a summary table:
| # | Change | Dimension | Source |
|---|--------|-----------|--------|

## Quality Criteria
- Zero redundancy with CLAUDE.md (anything auto-loaded shouldn't be repeated)
- All SDD prerequisite rules present and matching AGENTS.md exactly
- All agent file paths match AGENTS.md roster's actual `File` column
- Tier execution order matches AGENTS.md DAG exactly
- File is more concise than current version (or equal if no redundancy found)
- Every proposed change cites its authoritative source
- No fabricated rules

## Quality Scores
- **Clarity**: 92%
- **Efficiency**: 88%
- **Structure**: 95%
- **Completeness**: 92%
- **Actionability**: 90%
- **Specificity**: 90%
- **Overall**: 91% (excellent)

## Original Prompt
```
claude-code-specialist agent, based on your knowledge about claude, review claude/commands/orchestrate.md and see if there are improvements that can be made. It's important to keep consistency with Agents.md and CLAUDE.md and to follow SDD rules and guardrails.
```

## Validation Checklist
- [ ] Token efficiency evaluated — redundancies with CLAUDE.md identified
- [ ] SDD compliance verified — all 3 prerequisite rules, 6-tier DAG, correct paths/extensions
- [ ] Structural quality assessed — frontmatter, section ordering, duplication
- [ ] Missing guardrails identified — version safety, security stop condition, Definition of Done
- [ ] Agent spawning accuracy checked — file paths match AGENTS.md roster, keyword table coverage
- [ ] All proposed changes cite authoritative source (AGENTS.md or CLAUDE.md)
- [ ] No fabricated rules or agents
- [ ] File is same size or smaller after improvements

## Edge Cases
- The "Important Rules" section (lines 92-100) may overlap with CLAUDE.md rules that are auto-loaded — if so, can it be trimmed?
- Agent paths in AGENTS.md show a mix of `agents/` and `.claude/agents/` — orchestrate.md step 4 uses only `.claude/agents/`. Verify which is correct per agent.
- The keyword trigger table is orchestrate-specific (not in AGENTS.md) — preserve it but verify completeness against AGENTS.md agent selection guide
- The `knowledge-synthesizer` appears in the "Always spawn" list (T1) and also in the trailing rule about deviation detection (line 100) — verify these are consistent
- Pre-flight section appears before the skill title/description — this is intentional (must run before anything else) but verify it works as expected when Claude loads the skill
